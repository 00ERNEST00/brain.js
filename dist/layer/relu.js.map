{"version":3,"sources":["../../src/layer/relu.js"],"names":["predict","learn","Relu","inputLayer","width","height","depth","predictKernel","functions","learnKernel","outputs","deltas","weights","errors","inputs","thread","y","x"],"mappings":"AAAA;;;;;;;;QAkCgBA,O,GAAAA,O;QAIAC,K,GAAAA,K;;AApChB;;;;AACA;;;;AACA;;;;;;;;;;IAEqBC,I;;;AACnB,gBAAYC,UAAZ,EAAwB;AAAA;;AAAA;;AAEtB,UAAKC,KAAL,GAAaD,WAAWC,KAAxB;AACA,UAAKC,MAAL,GAAcF,WAAWE,MAAzB;AACA,UAAKC,KAAL,GAAaH,WAAWG,KAAxB;AACA,UAAKH,UAAL,GAAkBA,UAAlB;AALsB;AAMvB;;;;mCAEc;AACb,WAAKI,aAAL,GAAqB,0BAAWP,OAAX,EAAoB;AACvCQ,mBAAW;AAD4B,OAApB,CAArB;;AAIA,WAAKC,WAAL,GAAmB,0BAAWR,KAAX,EAAkB;AACnCO,mBAAW;AADwB,OAAlB,CAAnB;AAGD;;;8BAES;AACR,WAAKE,OAAL,GAAe,KAAKH,aAAL,CAAmB,KAAKJ,UAAL,CAAgBO,OAAnC,CAAf;AACD;;;4BAEO;AACN,WAAKC,MAAL,GAAc,KAAKF,WAAL,CAAiB,KAAKG,OAAtB,EAA+B,KAAKC,MAApC,CAAd;AACD;;;;;;kBAzBkBX,I;AA4Bd,SAASF,OAAT,CAAiBc,MAAjB,EAAyB;AAC9B,SAAO,gBAAKA,OAAO,KAAKC,MAAL,CAAYC,CAAnB,EAAsB,KAAKD,MAAL,CAAYE,CAAlC,CAAL,CAAP;AACD;;AAEM,SAAShB,KAAT,CAAeW,OAAf,EAAwBC,MAAxB,EAAgC;AACrC,SAAO,0BAAeD,QAAQ,KAAKG,MAAL,CAAYC,CAApB,EAAuB,KAAKD,MAAL,CAAYE,CAAnC,CAAf,EAAsDJ,OAAO,KAAKE,MAAL,CAAYC,CAAnB,EAAsB,KAAKD,MAAL,CAAYE,CAAlC,CAAtD,CAAP;AACD","file":"relu.js","sourcesContent":["'use strict';\n\nimport Base from './base';\nimport makeKernel from '../utilities/make-kernel';\nimport { relu, reluDerivative } from '../activation/relu';\n\nexport default class Relu extends Base {\n  constructor(inputLayer) {\n    super();\n    this.width = inputLayer.width;\n    this.height = inputLayer.height;\n    this.depth = inputLayer.depth;\n    this.inputLayer = inputLayer;\n  }\n\n  setupKernels() {\n    this.predictKernel = makeKernel(predict, {\n      functions: [relu]\n    });\n\n    this.learnKernel = makeKernel(learn, {\n      functions: [reluDerivative]\n    });\n  }\n\n  predict() {\n    this.outputs = this.predictKernel(this.inputLayer.outputs);\n  }\n\n  learn() {\n    this.deltas = this.learnKernel(this.weights, this.errors);\n  }\n}\n\nexport function predict(inputs) {\n  return relu(inputs[this.thread.y][this.thread.x]);\n}\n\nexport function learn(weights, errors) {\n  return reluDerivative(weights[this.thread.y][this.thread.x], errors[this.thread.y][this.thread.x]);\n}"]}